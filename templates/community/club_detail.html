{% extends 'base.html' %}
{% block content %}
<div class="card p-4" style="max-width:900px; margin:auto;">
  <h3>{{ club.name }}</h3>
  <p class="text-muted">{{ club.faculty_incharge or '' }}{% if club.faculty_incharge %} — Faculty Incharge{% endif %}</p>
  <p>{{ club.description or 'No description provided.' }}</p>

<p><strong>Contact:</strong>
  {% set contact = (club.contact or '') | trim %}

  {% if not contact %}
    -
  {% elif 'http' in contact %}
    {% set last_idx = contact.rfind('http') %}
    {% set label = contact[:last_idx].strip() %}
    {% set url = contact[last_idx:].strip() %}
    {% set label = label.replace('https://', '').replace('http://', '') %}
    {% set url = url.replace('https://https://', 'https://').replace('http://http://', 'http://') %}

    {% if 'instagram' in label|lower %}
      <img src="{{ url_for('static', filename='icons/instagram.png') }}"
           alt="Instagram"
           width="18"
           height="18"
           style="vertical-align:middle; margin-right:8px; border-radius:3px;">
    {% else %}
      {{ label }}
    {% endif %}

    <a href="{{ url }}" target="_blank" rel="noopener noreferrer" style="color:#007bff; text-decoration:none;">
      {{ url }}
    </a>

  {% else %}
    {{ contact }}
  {% endif %}
</p>

  {% if club.website %}
    <p><strong>Website:</strong> <a href="{{ club.website }}" target="_blank" rel="noopener noreferrer">{{ club.website }}</a></p>
  {% endif %}

  <a href="{{ url_for('clubs') }}" class="btn btn-secondary mt-3">← Back to clubs</a>
</div>
{% endblock %}
