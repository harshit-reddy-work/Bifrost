{% extends 'base.html' %}
{% block title %}Leaderboard ‚Äî CloudRoom{% endblock %}

{% block content %}
<div class="container" style="max-width:1100px; margin: 48px auto; padding: 0 20px;">
  <h1 style="font-size:32px; margin-bottom:8px;">üèÜ Campus Leaderboard</h1>
  <p class="lead" style="color:#475569; margin-bottom:20px;">
    Ranks based on combined scores from HackerRank, CodeChef, and LeetCode.
  </p>

  <div class="card" style="padding:12px; border-radius:12px; box-shadow:0 8px 24px rgba(2,6,23,0.04);">
    <div style="overflow-x:auto;">
      <table class="table table-borderless" style="min-width:760px;">
        <thead>
          <tr style="border-bottom:1px solid #e9f2f7;">
            <th style="width:80px;">Rank</th>
            <th>User</th>
            <th style="width:120px;">HackerRank</th>
            <th style="width:120px;">CodeChef</th>
            <th style="width:120px;">LeetCode</th>
            <th style="width:120px;">Total</th>
          </tr>
        </thead>
        <tbody>
          {% for r in rows %}
          <tr style="border-bottom:1px solid #f6fbfd;">
            <td style="font-weight:700; padding:12px 8px;">{{ r.rank }}</td>
            <td style="padding:12px 8px;">
              <div class="d-flex align-items-center" style="gap:12px;">
                <img src="{{ r.avatar_url or url_for('static', filename='default-avatar.png') }}" alt="" style="width:40px; height:40px; border-radius:50%; object-fit:cover;">
                <div>
                  <div style="font-weight:700;">{{ r.display_name or r.username }}</div>
                  <div style="font-size:13px; color:#6b7280;">@{{ r.username }}</div>
                </div>
              </div>
            </td>
            <td style="padding:12px 8px;">{{ r.hackerrank_score }}</td>
            <td style="padding:12px 8px;">{{ r.codechef_score }}</td>
            <td style="padding:12px 8px;">{{ r.leetcode_score }}</td>
            <td style="font-weight:800; padding:12px 8px;">{{ r.total_score }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <p class="text-muted mt-3" style="font-size:13px;">
    Note: Scores are updated periodically. To refresh automatically we can add a background worker and cache (Redis) ‚Äî tell me if you want that next.
  </p>
</div>
{% endblock %}